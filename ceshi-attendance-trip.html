<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<title>考勤-出差</title>
		<link rel="stylesheet" type="text/css" href="plugins/weui/css/weui.css" />
		<link rel="stylesheet" type="text/css" href="plugins/weui/css/jquery-weui.css" />
		<link rel="stylesheet" type="text/css" href="css/base.css" />
		<link rel="stylesheet" type="text/css" href="css/send-add.css" />
		<link rel="stylesheet" type="text/css" href="css/item.css" />
		<link rel="stylesheet" type="text/css" href="css/iconfont.css" />

		<link rel="stylesheet" type="text/css" href="css/attendance.css" />
		<link rel="stylesheet" type="text/css" href="plugins/mui/css/mui.picker.min.css" />
		<script type="text/javascript" src="plugins/weui/js/jquery-2.1.4.js"></script>
		<script src="plugins/weui/js/jquery-weui.js" type="text/javascript" charset="utf-8"></script>
	</head>

	<body id="progressAdd" class="attendance trip">
		<div class="weui-tab">
			<div class="weui-tab__bd">
				<div id="tab1" class="weui-tab__bd-item weui-tab__bd-item--active">
					<div class="main">
						<div class="weui-cells weui-cells_form weui-cells-trip">
							<div class="weui-cell ">
								<div class="weui-cell__hd">
									<label for="" class="weui-label">出差事由</label>
								</div>
								<div class="weui-cell__ft">
									<textarea class="weui-textarea" placeholder="请输入" rows="2"></textarea>
								</div>
							</div>
						</div>
						<div class="addWrap">
							<div class="weui-cells weui-cells_form addList">
								<div class="node">
									<div class="">行程<span class="nodeNum">1</span></div>
								</div>
								<a class="weui-cell weui-cell_access" href="javascript:;">
									<div class="weui-cell__hd">
										<label for="" class="weui-label">交通工具</label>
									</div>
									<div class="weui-cell__ft">
										<select class="weui-select" name="select2" id="select">
											<option value="" style="display: none" class="option-title">请选择</option>
											<option value="1">公交</option>
											<option value="2">地铁</option>
											<option value="3">汽车</option>
											<option value="3">火车</option>
											<option value="3">飞机</option>
										</select>
									</div>
								</a>
								<a class="weui-cell weui-cell_access" href="javascript:;">
									<div class="weui-cell__hd">
										<label for="" class="weui-label">单程往返</label>
									</div>
									<div class="weui-cell__ft">
										<select class="weui-select" name="select2" id="select">
											<option value="" style="display: none" class="option-title">请选择</option>
											<option value="1">单程</option>
											<option value="2">往返</option>
										</select>
									</div>
								</a>
								<a class="weui-cell weui-cell_access" href="javascript:;">
									<div class="weui-cell__hd">
										<label for="" class="weui-label">出发城市</label>
									</div>
									<div class="weui-cell__ft">
										<select class="weui-select" name="select2" id="select">
											<option value="" style="display: none" class="option-title">请选择</option>
											<option value="1">郑州</option>
											<option value="2">周口</option>
										</select>
									</div>
								</a>
								<a class="weui-cell weui-cell_access" href="javascript:;">
									<div class="weui-cell__hd">
										<label for="" class="weui-label">目的城市</label>
									</div>
									<div class="weui-cell__ft">
										<select class="weui-select" name="select2" id="select">
											<option value="" style="display: none" class="option-title">请选择</option>
											<option value="1">周口</option>
											<option value="2">北京</option>
										</select>
									</div>
								</a>
								<a class="weui-cell weui-cell_access" href="javascript:;">
									<div class="weui-cell__hd">
										<label for="begintime" class="weui-label">开始日期</label>
									</div>
									<div class="weui-cell__ft">
										<input data-options='{}' class="datebtn mui-btn" id="startTime1" name="startTime" type="text" placeholder="开始时间">
									</div>
								</a>
								<a class="weui-cell weui-cell_access" href="javascript:;">
									<div class="weui-cell__hd">
										<label for="time2" class="weui-label">结束日期</label>
									</div>
									<div class="weui-cell__ft">
										<input data-options='{}' class="datebtn mui-btn" id="ecdTime1" name="endTime" type="text" placeholder="结束时间">
									</div>
								</a>
								<a class="weui-cell" href="javascript:;">
									<div class="weui-cell__hd">
										<label for="time1" class="weui-label">时长</label>
									</div>
									<div class="weui-cell__ft">
										<input type="text" class="weui-input" name="" id="" value="" placeholder="自动计算" />
									</div>
								</a>
								<div class="weui-cell">
									<div class="weui-cell__hd">
										<p>计划内容</p>
									</div>
									<div class="weui-cell__ft">
										<textarea class="weui-textarea" placeholder="请填写计划详情" rows="3"></textarea>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class='add-btn'>
						<a href="javascript:;">+增加行程</a>
					</div>
					<div class="weui-cells weui-cells_form">
						<div class="weui-cell ">
							<div class="weui-cell__hd">
								<label for="" class="weui-label">同行人员</label>
							</div>
							<div class="weui-cell__ft">
								<input class="weui-input" placeholder="请输入">
							</div>
						</div>
					</div>

					<!--审批功能-->
					<div class="weui-cells weui-cells_form">
						<div class="weui-cell_access">
							<div class="weui-cell__hd">
								<p class="send-text">审批</p>
								<div class="to__right">
									<!--<div class="tso__title">抄送（<span id="selectNum"></span>）人</div>-->
									<div class="to__content" id="rightCont"></div>
								</div>
								<div class="full add-icon " data-full="sp">
									<img src="img/send-add.jpg" />
								</div>
							</div>
						</div>
					</div>
					<!--选择联系人弹出层-->
					<div class="fullBox " data-full="sp">
						<div class="mark"></div>
						<div class="fullModal">
							<div class="mui-content">
								<div id='list' class="mui-indexed-list">
									<div class="mui-table-view mui-table-view-radio">
										<div class="weui-cells_form to__block">
											<div class="to__left">
												<div class="to__content">
													<div class="weui-search-bar to__search" id="searchBar">
														<form class="weui-search-bar__form">
															<div class="weui-search-bar__box">
																<i class="weui-icon-search"></i>
																<input type="search" class="weui-search-bar__input" id="searchInput" placeholder="搜索" required="">
																<a href="javascript:" class="weui-icon-clear" id="searchClear"></a>
															</div>
															<label class="weui-search-bar__label" id="searchText">
										      <i class="weui-icon-search"></i>
										      <span>搜索</span>
										    </label>
														</form>
														<a href="javascript:" class="weui-search-bar__cancel-btn" id="searchCancel">取消</a>
													</div>
													<div class="" id="leftCont"></div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<a href="javascript:;" class="weui-btn weui-btn_primary close-full">确定(<span id="selectNum"></span>人)</a>
						</div>
					</div>
					<!--抄送功能-->
					<div class="weui-cells weui-cells_form">
						<div class="weui-cell_access">
							<div class="weui-cell__hd">
								<p class="send-text">抄送</p>
								<div class="to__right">
									<!--<div class="tso__title">抄送（<span id="selectNum"></span>）人</div>-->
									<div class="to__content" id="rightCont"></div>
								</div>
								<div class="full add-icon " data-full="cs">
									<img src="img/send-add.jpg" />
								</div>
							</div>
						</div>
					</div>
					<!--选择联系人弹出层-->
					<div class="fullBox " data-full="cs">
						<div class="mark"></div>
						<div class="fullModal">
							<div class="mui-content">
								<div id='list' class="mui-indexed-list">
									<div class="mui-table-view mui-table-view-radio">
										<div class="weui-cells_form to__block">
											<div class="to__left">
												<div class="to__content">
													<div class="weui-search-bar to__search" id="searchBar">
														<form class="weui-search-bar__form">
															<div class="weui-search-bar__box">
																<i class="weui-icon-search"></i>
																<input type="search" class="weui-search-bar__input" id="searchInput" placeholder="搜索" required="">
																<a href="javascript:" class="weui-icon-clear" id="searchClear"></a>
															</div>
															<label class="weui-search-bar__label" id="searchText">
										      <i class="weui-icon-search"></i>
										      <span>搜索</span>
										    </label>
														</form>
														<a href="javascript:" class="weui-search-bar__cancel-btn" id="searchCancel">取消</a>
													</div>
													<div class="" id="leftCont"></div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<a href="javascript:;" class="weui-btn weui-btn_primary close-full">确定(<span id="selectNum"></span>人)</a>
						</div>
					</div>

					<div class='submit-btn'>
						<a href="javascript:;" class="weui-btn weui-btn_submit">保存</a>
					</div>
				</div>
				<!--记录页面-->
				<div id="tab2" class="weui-tab__bd-item">
					<div class="record" id="container">
						<div id="content" class="weui-cells">
							<!--列表加载内容-->
							<div class="weui-cell report-cell">
								<div class="customer-group">
									<div class="img">张</div>
									<div class="time-info">
										<div class="info-myAtt">
											<div class="name-info">
												<span class="name">张三</span>的出差申请
											</div>
											<div class="report">
												<div class="describe">
													开始时间：
													<p class="timeRecord">2020-3-24 上午</p>
												</div>
												<div class="describe">
													结束时间：
													<p class="timeRecord">2020-3-24 下午</p>
												</div>
												<div class="describe">
													时长：
													<p class="timeRecord">半天</p>
												</div>
											</div>
										</div>
									</div>
									<div class="detail">
										<div class="date">2019-06-06</div>
										<div class="state">
											<div class="record-pass">已通过</div>
											<div class="record-wait">待审批</div>
											<div class="record-refuse">已拒绝</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!--滚动加载-->
						<div class="weui-loadmore">
							<i class="weui-loading"></i>
							<span class="weui-loadmore__tips">正在加载</span>
						</div>
						<!--				<div class="add iconfont icon-add"></div>-->
					</div>
				</div>
			</div>
			<div class="weui-tabbar">
				<a href="#tab1" class="weui-tabbar__item weui-bar__item--on">
					<div class="weui-tabbar__icon">
						<i class="iconfont icon-wyqj"></i>
					</div>
					<p class="weui-tabbar__label">我要出差</p>
				</a>
				<a href="#tab2" class="weui-tabbar__item">
					<div class="weui-tabbar__icon">
						<i class="iconfont icon-wdjl"></i>
					</div>
					<p class="weui-tabbar__label">出差记录</p>
				</a>
			</div>
		</div>

	</body>
	<script src="plugins/weui/js/weui.js" type="text/javascript" charset="utf-8"></script>
	<script src="plugins/weui/js/fastclick.js" type="text/javascript" charset="utf-8"></script>
	<script src="plugins/mui/js/mui.js"></script>
	<script src="plugins/mui/js/mui.picker.min.js"></script>
	<script src="js/baes.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="js/send-add.js"></script>
	<script type="text/javascript" src="js/cost-application.js"></script>

	<script type="text/javascript">
		$(function() {
			FastClick.attach(document.body);
		});

		//时间选择组件
		(function($) {
			$.init();
			loadTimer();
		})(mui);

		function loadTimer() {
			var btns = $('.datebtn');
			btns.each(function(i, btn) {
				$(btn).unbind("click");
				$(btn).click(function() {
					var _self = this;
					if(_self.picker) {
						console.log(123)
						_self.picker.show(function(rs) {
							_self.picker.dispose();
							_self.picker = null;
						});
					} else {
						console.log(456)
						var optionsJson = this.getAttribute('data-options') || '{}';
						var id = this.getAttribute('id');

						_self.picker = new mui.DtPicker({
							type: "datetime", //设置日历初始视图模式 
						});

						_self.picker.show(function(rs) {
							_self.style.color = "#333";
							_self.value = rs.text;
							_self.picker.dispose();
							_self.picker = null;
						});
					}
				})
			});
		}

		$(function() {
			//序号
			var index = 1;
			var num;
			$(".nodeNum").each(function() { //对序号列span 的 name 进行循环
				num = $(this).html(index++);
			});
			//添加
			$('.add-btn').click(function() {
				$(".nodeNum").each(function() {
					var s = $(".nodeNum").length;
					num = s + 1;
				});

				var addList = '<div class="weui-cells weui-cells_form addList"><div class="node"><div class="">行程<span class="nodeNum">' + num + '</span></div></div><a class="weui-cell weui-cell_access" href="javascript:;"><div class="weui-cell__hd"><label for="begintime" class="weui-label">加油时间</label></div><div class="weui-cell__ft"><input data-options="{}" class="datebtn mui-btn" id="refuelTime1" name="refuelTime" type="text" placeholder="请选择"></div></a><a class="weui-cell" href="javascript:;"><div class="weui-cell__hd"><label for="time1" class="weui-label">加油金额</label></div><div class="weui-cell__ft"><input type="text" class="weui-input" name="" id="" value="" placeholder="请输入" /></div></a></div>';
				$(".main").append(addList);
				loadTimer();
			})
			//删除
			$(document).on('click', '.del', (function() {
				$($(this).parent().parent().nextAll(".addList")).each(function() {
					var a = $(this).find('span').eq(0).text();
					$(this).find('span').eq(0).text(a - 1);
				});
				$(this).parent().parent().remove();
			}));
		})
	</script>

</html>